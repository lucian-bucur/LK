
  - name: Run the shell command to retrieve the data
    shell: "host {{ item[0] }} | grep {{ item[1] }}"
    register: servers
    failed_when: servers.rc == 199

  - name: Check for failure and output a message
    fail: msg="The domain {{ item }} contains the ip of the current server. Exiting gracefully .... "
    when: servers.rc == 0
